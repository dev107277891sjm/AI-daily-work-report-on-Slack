{% extends "base.html" %}
{% block title %}Activity - Work Report{% endblock %}
{% block content %}
<div class="card">
  <h2>Activity by date</h2>
  <form method="get" action="{{ url_for('activity') }}" style="margin-bottom: 1rem;">
    <label>Date <input type="date" name="date" value="{{ selected_date.isoformat() }}"></label>
    <button type="submit" class="btn">Show</button>
  </form>
  <table style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="text-align: left; border-bottom: 1px solid var(--muted);">
        <th style="padding: 0.5rem;">Process</th>
        <th style="padding: 0.5rem;">Window title</th>
        <th style="padding: 0.5rem;">Started</th>
        <th style="padding: 0.5rem;">Duration</th>
      </tr>
    </thead>
    <tbody>
      {% for s in sessions %}
      <tr style="border-bottom: 1px solid var(--surface);">
        <td style="padding: 0.5rem;">{{ s.process_name }}</td>
        <td style="padding: 0.5rem; max-width: 300px; overflow: hidden; text-overflow: ellipsis;" title="{{ s.window_title }}">{{ s.window_title or '—' }}</td>
        <td style="padding: 0.5rem;">{{ s.started_at.strftime('%H:%M:%S') if s.started_at else '—' }}</td>
        <td style="padding: 0.5rem;">{{ (s.duration_seconds or 0) | round(1) }}s</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% if not sessions %}
  <p>No sessions for this date.</p>
  {% endif %}
</div>
{% endblock %}
